# 仮想通貨取引シミュレーター 仕様書

## 1. システム概要

### 1.1 目的
- 仮想通貨の自動売買シミュレーションシステム
- AI（自動売買ロジック）による24時間取引
- 実際の仮想通貨価格を使用したリアルタイムシミュレーション

### 1.2 主要機能
- 50種類の仮想通貨取引
- Binance APIによるリアルタイム価格取得
- 高頻度取引（0.5秒間隔）
- 自動売買AI
- 目標達成トラッカー
- リアルタイム損益表示

## 2. 技術仕様

### 2.1 フロントエンド
- **フレームワーク**: React 18
- **ビルドツール**: Vite
- **UIライブラリ**: Framer Motion（アニメーション）
- **チャート**: Chart.js + react-chartjs-2
- **スタイリング**: CSS Modules

### 2.2 API連携
- **価格データ**: Binance Public API
  - エンドポイント: `https://api.binance.com/api/v3/ticker/price`
  - 更新頻度: 10秒
  - WebSocket: リアルタイム価格ストリーミング

### 2.3 対応仮想通貨（50種類）
```
BTC, ETH, BNB, SOL, XRP, ADA, DOGE, AVAX, DOT, MATIC,
LINK, UNI, LTC, FTM, ATOM, XLM, NEAR, ALGO, VET, FIL,
ICP, APT, ARB, OP, INJ, TRX, HBAR, LDO, IMX, GRT,
SAND, MANA, AXS, THETA, EGLD, FLOW, CHZ, KCS, QNT, AAVE,
SNX, CRV, MKR, COMP, ENJ, BAT, ZIL, DASH, NEO, WAVES
```

## 3. 取引ロジック

### 3.1 自動売買戦略

#### 購入条件
- ポジション数が5個未満
- 残高が50,000円以上
- 50%の確率で実行
- 投資額: 残高の2%

#### 売却条件（以下のいずれか）
- 0.1%以上の利益
- 1.0%以上の損失（損切り）
- 50%の確率でランダム売却（回転率向上）

### 3.2 取引パラメータ
- **実行間隔**: 0.5秒
- **最大ポジション数**: 5
- **1回の投資額**: 残高の2%
- **手数料**: 0.1%（Binance基準）
- **価格変動シミュレーション**: ±1%/秒

## 4. ユーザーインターフェース

### 4.1 初期設定画面
- 初期投資金額設定（デフォルト: 1,000,000円）
- 目標収益率設定（デフォルト: 20%）
- 達成期間設定（デフォルト: 30日）
- 取引戦略選択
- AI自動売買の有効/無効

### 4.2 ダッシュボード
- **統計情報**
  - 総資産
  - 現金残高
  - 損益（金額・パーセント）
  - 収益率

- **価格表示**
  - 20種類の仮想通貨価格をグリッド表示
  - リアルタイム更新

- **取引履歴**
  - 最新20件の取引を表示
  - 売買種別、通貨、数量、価格、損益率

- **目標達成トラッカー**
  - 進捗バー
  - 必要日次成長率
  - 実際の成長率
  - 残り期間

### 4.3 チャート機能
- 価格推移グラフ
- 出来高表示
- 複数時間軸（5分、15分、1時間、4時間、1日）
- 高値・安値・現在価格表示

## 5. データフロー

```
1. Binance API → 価格データ取得（10秒間隔）
2. WebSocket → リアルタイム価格更新（主要10通貨）
3. 価格変動シミュレーション（±1%/秒）
4. 自動売買ロジック実行（0.5秒間隔）
5. ポートフォリオ更新
6. UI更新（React State）
```

## 6. ファイル構成

```
/web
├── src/
│   ├── components/
│   │   ├── Dashboard.jsx         # メインダッシュボード
│   │   ├── InitialSetup.jsx      # 初期設定画面
│   │   ├── AdvancedPriceChart.jsx # 価格チャート
│   │   ├── Portfolio.jsx         # ポートフォリオ表示
│   │   ├── TradingPanel.jsx      # 取引パネル
│   │   └── GoalTracker.jsx       # 目標達成トラッカー
│   ├── services/
│   │   ├── CryptoAPI.js          # Binance API連携
│   │   └── TradingSimulator.js   # 取引シミュレーター
│   └── App.jsx                   # メインアプリケーション
├── standalone.html                # スタンドアロン版（CDN）
├── package.json                   # 依存関係
└── vite.config.js                # Vite設定
```

## 7. 動作環境

### 7.1 必要環境
- Node.js 18以上
- npm 8以上
- モダンブラウザ（Chrome, Firefox, Safari, Edge）

### 7.2 開発サーバー起動
```bash
npm install
npm run dev
```
アクセス: http://localhost:5173

### 7.3 スタンドアロン版
`standalone.html`をブラウザで直接開く（サーバー不要）

## 8. セキュリティ考慮事項

- APIキー不要（Binance Public API使用）
- CORS対応（Viteプロキシ設定）
- クライアントサイドのみで動作
- 実際の取引は行わない（シミュレーションのみ）

## 9. パフォーマンス最適化

- React.memoによるコンポーネント最適化
- チャートデータの間引き（最大100ポイント）
- WebSocket接続数制限（最大10通貨）
- 取引履歴の制限（最新20件）

## 10. 今後の拡張予定

- [ ] 複数の取引戦略実装
- [ ] バックテスト機能
- [ ] 取引履歴のエクスポート
- [ ] より詳細な分析ツール
- [ ] モバイル対応
- [ ] 多言語対応

## 11. トラブルシューティング

### アプリケーションが表示されない
1. 開発サーバーが起動しているか確認
2. http://localhost:5173 にアクセス
3. ブラウザのキャッシュをクリア（Cmd+Shift+R）

### 価格が更新されない
1. インターネット接続を確認
2. Binance APIのステータスを確認
3. ブラウザの開発者ツールでエラーを確認

### 取引が実行されない
1. AI自動売買が有効になっているか確認
2. 残高が十分あるか確認
3. ポジション数が上限に達していないか確認

---

作成日: 2025年9月14日
バージョン: 1.0.0