<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»®æƒ³é€šè²¨å–å¼•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1e1e3f 0%, #2a2a4e 100%);
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
        }

        .app {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00ff88;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title {
            font-size: 28px;
            font-weight: bold;
            color: #00ff88;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: #00ff88;
        }

        .stat-label {
            color: #999;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }

        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }

        .crypto-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .crypto-card:hover {
            background: rgba(0, 255, 136, 0.2);
            border-color: #00ff88;
        }

        .crypto-symbol {
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 5px;
        }

        .crypto-price {
            font-size: 12px;
            color: #fff;
        }

        .control-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .btn {
            background: #00ff88;
            color: #1e1e3f;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: opacity 0.3s;
        }

        .btn:hover {
            opacity: 0.8;
        }

        .btn.active {
            background: #ff4444;
            color: white;
        }

        .trades-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .trade-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .trade-buy {
            border-left: 3px solid #00ff88;
        }

        .trade-sell {
            border-left: 3px solid #ff4444;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 20px;
            color: #00ff88;
        }

        .error {
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid #ff4444;
            color: #ff4444;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function App() {
            const [balance, setBalance] = useState(1000000);
            const [positions, setPositions] = useState([]);
            const [trades, setTrades] = useState([]);
            const [prices, setPrices] = useState({});
            const [isAutoTrading, setIsAutoTrading] = useState(false);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            // 50ç¨®é¡ã®ä»®æƒ³é€šè²¨ãƒªã‚¹ãƒˆ
            const cryptoList = [
                'BTC', 'ETH', 'BNB', 'SOL', 'XRP', 'ADA', 'DOGE', 'AVAX', 'DOT', 'MATIC',
                'LINK', 'UNI', 'LTC', 'FTM', 'ATOM', 'XLM', 'NEAR', 'ALGO', 'VET', 'FIL',
                'ICP', 'APT', 'ARB', 'OP', 'INJ', 'TRX', 'HBAR', 'LDO', 'IMX', 'GRT',
                'SAND', 'MANA', 'AXS', 'THETA', 'EGLD', 'FLOW', 'CHZ', 'KCS', 'QNT', 'AAVE',
                'SNX', 'CRV', 'MKR', 'COMP', 'ENJ', 'BAT', 'ZIL', 'DASH', 'NEO', 'WAVES'
            ];

            // ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const fetchPrices = async () => {
                try {
                    const response = await axios.get('https://api.binance.com/api/v3/ticker/price');
                    const priceData = {};
                    const usdToJpy = 150;

                    response.data.forEach(ticker => {
                        const symbol = ticker.symbol.replace('USDT', '');
                        if (cryptoList.includes(symbol)) {
                            priceData[symbol] = parseFloat(ticker.price) * usdToJpy;
                        }
                    });

                    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¾¡æ ¼ã‚’è¨­å®š
                    cryptoList.forEach(symbol => {
                        if (!priceData[symbol]) {
                            priceData[symbol] = Math.random() * 100000 + 10000;
                        }
                    });

                    setPrices(priceData);
                    setLoading(false);
                } catch (err) {
                    console.error('Price fetch error:', err);
                    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¾¡æ ¼ã‚’è¨­å®š
                    const fallbackPrices = {};
                    cryptoList.forEach(symbol => {
                        fallbackPrices[symbol] = Math.random() * 100000 + 10000;
                    });
                    setPrices(fallbackPrices);
                    setLoading(false);
                }
            };

            // è‡ªå‹•å–å¼•ã®å®Ÿè¡Œ
            const executeTrade = () => {
                if (!isAutoTrading || Object.keys(prices).length === 0) return;

                // ã¾ãšå£²å´åˆ¤å®šï¼ˆä¿æœ‰ãƒã‚¸ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹å ´åˆï¼‰
                const openPositions = positions.filter(p => p.status === 'open');

                // ãƒ©ãƒ³ãƒ€ãƒ ã«ä¾¡æ ¼ã‚’å°‘ã—å¤‰å‹•ã•ã›ã‚‹ï¼ˆãƒªã‚¢ãƒ«ãªå–å¼•ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
                Object.keys(prices).forEach(symbol => {
                    const change = (Math.random() - 0.5) * 0.01; // Â±0.5%ã®å¤‰å‹•
                    setPrices(prev => ({
                        ...prev,
                        [symbol]: prev[symbol] * (1 + change)
                    }));
                });

                // å£²å´å‡¦ç†ï¼ˆãƒã‚¸ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹å ´åˆã¯å¿…ãšå£²å´åˆ¤å®šï¼‰
                if (openPositions.length > 0) {
                    // ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’é¸æŠ
                    const randomPosition = openPositions[Math.floor(Math.random() * openPositions.length)];
                    const currentPrice = prices[randomPosition.symbol] * (1 + (Math.random() - 0.5) * 0.02);
                    const profit = (currentPrice - randomPosition.buyPrice) / randomPosition.buyPrice * 100;

                    // è¶…ç©æ¥µçš„ãªå£²å´æ¡ä»¶ï¼ˆ0.1%åˆ©ç›Šã§å³å£²å´ã€ã¾ãŸã¯50%ã®ç¢ºç‡ã§å£²å´ï¼‰
                    if (profit > 0.1 || profit < -1.0 || Math.random() > 0.5) {
                        const revenue = randomPosition.amount * currentPrice;
                        setBalance(prev => prev + revenue);
                        setPositions(prev => prev.filter(p => p.id !== randomPosition.id)); // ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤
                        setTrades(prev => [{
                            id: Date.now() + Math.random(),
                            type: 'sell',
                            symbol: randomPosition.symbol,
                            amount: randomPosition.amount,
                            price: currentPrice,
                            profit: profit > 0 ? `+${profit.toFixed(2)}%` : `${profit.toFixed(2)}%`,
                            time: new Date().toLocaleTimeString('ja-JP')
                        }, ...prev.slice(0, 19)]);
                        return; // å£²å´ã—ãŸã‚‰çµ‚äº†
                    }
                }

                // è³¼å…¥å‡¦ç†ï¼ˆãƒã‚¸ã‚·ãƒ§ãƒ³ãŒ5å€‹æœªæº€ã®æ™‚ã®ã¿ï¼‰
                if (openPositions.length < 5 && balance > 50000 && Math.random() > 0.5) { // 50%ã®ç¢ºç‡ã§è³¼å…¥
                    const symbols = Object.keys(prices);
                    const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                    const price = prices[randomSymbol];
                    const amount = (balance * 0.02) / price; // æ®‹é«˜ã®2%ã§è³¼å…¥
                    const cost = amount * price;

                    if (cost < balance) {
                        setBalance(prev => prev - cost);
                        setPositions(prev => [...prev, {
                            id: Date.now() + Math.random(),
                            symbol: randomSymbol,
                            amount,
                            buyPrice: price,
                            status: 'open'
                        }]);
                        setTrades(prev => [{
                            id: Date.now() + Math.random(),
                            type: 'buy',
                            symbol: randomSymbol,
                            amount,
                            price,
                            time: new Date().toLocaleTimeString('ja-JP')
                        }, ...prev.slice(0, 19)]);
                    }
                }
            };

            // ç·è³‡ç”£ã‚’è¨ˆç®—
            const getTotalValue = () => {
                let total = balance;
                positions.filter(p => p.status === 'open').forEach(position => {
                    if (prices[position.symbol]) {
                        total += position.amount * prices[position.symbol];
                    }
                });
                return total;
            };

            useEffect(() => {
                fetchPrices();
                const interval = setInterval(fetchPrices, 10000); // 10ç§’ã”ã¨ã«ä¾¡æ ¼æ›´æ–°
                return () => clearInterval(interval);
            }, []);

            useEffect(() => {
                if (isAutoTrading) {
                    const interval = setInterval(executeTrade, 500); // 0.5ç§’ã”ã¨ã«å–å¼•
                    return () => clearInterval(interval);
                }
            }, [isAutoTrading, prices, balance, positions]);

            if (loading) {
                return <div className="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>;
            }

            const totalValue = getTotalValue();
            const profitLoss = totalValue - 1000000;
            const profitPercentage = (profitLoss / 1000000 * 100).toFixed(2);

            return (
                <div className="app">
                    <div className="header">
                        <h1 className="title">ğŸš€ ä»®æƒ³é€šè²¨å–å¼•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
                        <button
                            className={`btn ${isAutoTrading ? 'active' : ''}`}
                            onClick={() => setIsAutoTrading(!isAutoTrading)}
                        >
                            {isAutoTrading ? 'AIå–å¼•åœæ­¢' : 'AIå–å¼•é–‹å§‹'}
                        </button>
                    </div>

                    <div className="stats-grid">
                        <div className="stat-card">
                            <div className="stat-label">ç·è³‡ç”£</div>
                            <div className="stat-value">Â¥{totalValue.toLocaleString()}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">ç¾é‡‘æ®‹é«˜</div>
                            <div className="stat-value">Â¥{balance.toLocaleString()}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">æç›Š</div>
                            <div className="stat-value" style={{color: profitLoss >= 0 ? '#00ff88' : '#ff4444'}}>
                                {profitLoss >= 0 ? '+' : ''}Â¥{profitLoss.toLocaleString()}
                            </div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">åç›Šç‡</div>
                            <div className="stat-value" style={{color: profitLoss >= 0 ? '#00ff88' : '#ff4444'}}>
                                {profitLoss >= 0 ? '+' : ''}{profitPercentage}%
                            </div>
                        </div>
                    </div>

                    <h3 style={{marginBottom: '10px'}}>ä»®æƒ³é€šè²¨ä¾¡æ ¼ï¼ˆ50ç¨®é¡ï¼‰</h3>
                    <div className="crypto-grid">
                        {Object.entries(prices).slice(0, 20).map(([symbol, price]) => (
                            <div key={symbol} className="crypto-card">
                                <div className="crypto-symbol">{symbol}</div>
                                <div className="crypto-price">Â¥{price.toLocaleString()}</div>
                            </div>
                        ))}
                    </div>

                    <h3 style={{marginBottom: '10px'}}>æœ€è¿‘ã®å–å¼•</h3>
                    <div className="trades-list">
                        {trades.length === 0 ? (
                            <p style={{textAlign: 'center', color: '#999'}}>å–å¼•å±¥æ­´ãªã—</p>
                        ) : (
                            trades.map(trade => (
                                <div key={trade.id} className={`trade-item trade-${trade.type}`}>
                                    <div>
                                        <strong>{trade.type === 'buy' ? 'è³¼å…¥' : 'å£²å´'}</strong>
                                        <div>{trade.symbol} Ã— {trade.amount.toFixed(4)}</div>
                                    </div>
                                    <div style={{textAlign: 'right'}}>
                                        <div>Â¥{trade.price.toLocaleString()}</div>
                                        <div style={{fontSize: '12px', color: '#999'}}>{trade.time}</div>
                                        {trade.profit && <div style={{color: trade.profit.startsWith('+') ? '#00ff88' : '#ff4444'}}>{trade.profit}</div>}
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>