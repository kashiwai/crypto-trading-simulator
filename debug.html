<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éá„Éê„ÉÉ„Ç∞„ÉÑ„Éº„É´</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #eee;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #00ff88;
            border-bottom: 2px solid #00ff88;
            padding-bottom: 10px;
        }
        .status-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .check-item {
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
        }
        .status.ok {
            background: #00ff88;
            color: #1a1a2e;
        }
        .status.error {
            background: #ff4444;
            color: white;
        }
        .status.loading {
            background: #ffd700;
            color: #1a1a2e;
        }
        .btn {
            background: #00ff88;
            color: #1a1a2e;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
        }
        .btn:hover {
            opacity: 0.9;
        }
        #console {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }
        .log-entry {
            margin: 2px 0;
            padding: 2px;
        }
        .log-error {
            color: #ff4444;
        }
        .log-success {
            color: #00ff88;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #00ff88;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß ‰ªÆÊÉ≥ÈÄöË≤®ÂèñÂºï„Ç∑„Éü„É•„É¨„Éº„Çø„Éº - „Éá„Éê„ÉÉ„Ç∞„ÉÑ„Éº„É´</h1>

        <div class="status-card">
            <h2>„Ç∑„Çπ„ÉÜ„É†„Çπ„ÉÜ„Éº„Çø„Çπ</h2>
            <div class="check-item">
                <span>ÈñãÁô∫„Çµ„Éº„Éê„Éº (localhost:5173)</span>
                <span id="server-status" class="status loading">Á¢∫Ë™ç‰∏≠...</span>
            </div>
            <div class="check-item">
                <span>React „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥</span>
                <span id="app-status" class="status loading">Á¢∫Ë™ç‰∏≠...</span>
            </div>
            <div class="check-item">
                <span>Binance API Êé•Á∂ö</span>
                <span id="api-status" class="status loading">Á¢∫Ë™ç‰∏≠...</span>
            </div>
        </div>

        <div class="status-card">
            <h2>„Ç¢„ÇØ„Ç∑„Éß„É≥</h2>
            <button class="btn" onclick="checkServer()">„Çµ„Éº„Éê„ÉºÁ¢∫Ë™ç</button>
            <button class="btn" onclick="openApp()">„Ç¢„Éó„É™„ÇíÈñã„Åè</button>
            <button class="btn" onclick="testAPI()">API „ÉÜ„Çπ„Éà</button>
            <button class="btn" onclick="clearConsole()">„Ç≥„É≥„ÇΩ„Éº„É´„ÇØ„É™„Ç¢</button>
        </div>

        <div class="status-card">
            <h2>„Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ</h2>
            <div id="console"></div>
        </div>

        <div class="status-card">
            <h2>„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éó„É¨„Éì„É•„Éº</h2>
            <iframe id="app-frame" src="http://localhost:5173" title="Application"></iframe>
        </div>
    </div>

    <script>
        const consoleDiv = document.getElementById('console');

        function log(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            if (type === 'error') entry.className += ' log-error';
            if (type === 'success') entry.className += ' log-success';
            const timestamp = new Date().toLocaleTimeString('ja-JP');
            entry.textContent = `[${timestamp}] ${message}`;
            consoleDiv.appendChild(entry);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }

        function updateStatus(id, status, text) {
            const element = document.getElementById(id);
            element.className = 'status ' + status;
            element.textContent = text;
        }

        async function checkServer() {
            log('„Çµ„Éº„Éê„ÉºÁ¢∫Ë™ç„ÇíÈñãÂßã...');
            try {
                const response = await fetch('http://localhost:5173', {
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                updateStatus('server-status', 'ok', 'Á®ºÂÉç‰∏≠');
                log('„Çµ„Éº„Éê„Éº„ÅØÊ≠£Â∏∏„Å´Á®ºÂÉç„Åó„Å¶„ÅÑ„Åæ„Åô', 'success');
            } catch (error) {
                updateStatus('server-status', 'error', '„Ç®„É©„Éº');
                log('„Çµ„Éº„Éê„Éº„Ç®„É©„Éº: ' + error.message, 'error');
            }
        }

        async function testAPI() {
            log('Binance API „ÉÜ„Çπ„Éà„ÇíÈñãÂßã...');
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
                const data = await response.json();
                updateStatus('api-status', 'ok', 'Êé•Á∂öOK');
                log(`BTC‰æ°Ê†º: $${parseFloat(data.price).toFixed(2)}`, 'success');
            } catch (error) {
                updateStatus('api-status', 'error', '„Ç®„É©„Éº');
                log('API „Ç®„É©„Éº: ' + error.message, 'error');
            }
        }

        function openApp() {
            window.open('http://localhost:5173', '_blank');
            log('Êñ∞„Åó„ÅÑ„Çø„Éñ„Åß„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíÈñã„Åç„Åæ„Åó„Åü');
        }

        function clearConsole() {
            consoleDiv.innerHTML = '';
            log('„Ç≥„É≥„ÇΩ„Éº„É´„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü');
        }

        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÁä∂ÊÖã„ÇíÁõ£Ë¶ñ
        function checkApp() {
            const iframe = document.getElementById('app-frame');
            iframe.onload = function() {
                updateStatus('app-status', 'ok', 'Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
                log('„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅåÊ≠£Â∏∏„Å´Ë™≠„ÅøËæº„Åæ„Çå„Åæ„Åó„Åü', 'success');
            };
            iframe.onerror = function() {
                updateStatus('app-status', 'error', '„Ç®„É©„Éº');
                log('„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
            };
        }

        // ÂàùÊúüÂåñ
        window.onload = function() {
            log('„Éá„Éê„ÉÉ„Ç∞„ÉÑ„Éº„É´„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åó„Åü');
            checkServer();
            testAPI();
            checkApp();

            // ÂÆöÊúüÁöÑ„Å´„Çπ„ÉÜ„Éº„Çø„Çπ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
            setInterval(() => {
                checkServer();
            }, 10000); // 10Áßí„Åî„Å®
        };
    </script>
</body>
</html>